
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Python: module CRISpy.SaveLoad</title>
<meta charset="utf-8">
</head><body bgcolor="#f0f0f8">

<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong><a href="CRISpy.html"><font color="#ffffff">CRISpy</font></a>.SaveLoad</strong></big></big></font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial"><a href=".">index</a><br><a href="file:/Users/alex/Documents/deeppolarimetry/CRISpy/SaveLoad.py">/Users/alex/Documents/deeppolarimetry/CRISpy/SaveLoad.py</a></font></td></tr></table>
    <p><tt>Save&nbsp;and&nbsp;load&nbsp;routines&nbsp;to&nbsp;work&nbsp;with&nbsp;LPcubes&nbsp;and&nbsp;save&nbsp;fits&nbsp;or&nbsp;LPcubes</tt></p>
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="CRISpy.html">CRISpy</a><br>
<a href="numpy.html">numpy</a><br>
</td><td width="25%" valign=top><a href="os.html">os</a><br>
<a href="matplotlib.pyplot.html">matplotlib.pyplot</a><br>
</td><td width="25%" valign=top><a href="CRISpy.Reduction.html">CRISpy.Reduction</a><br>
</td><td width="25%" valign=top></td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#eeaa77">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Functions</strong></big></font></td></tr>
    
<tr><td bgcolor="#eeaa77"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl><dt><a name="-full_cube"><strong>full_cube</strong></a>(cube, nw, ns<font color="#909090">=4</font>, trim<font color="#909090">=20</font>)</dt><dd><tt>Creates&nbsp;a&nbsp;5D&nbsp;python&nbsp;readable&nbsp;from&nbsp;an&nbsp;lp&nbsp;cube.&nbsp;These&nbsp;files&nbsp;get&nbsp;big,&nbsp;so&nbsp;watch&nbsp;your&nbsp;RAM.<br>
INPUT:<br>
cube&nbsp;:&nbsp;filename,&nbsp;has&nbsp;to&nbsp;be&nbsp;.icube&nbsp;or&nbsp;.fcube<br>
nw&nbsp;&nbsp;&nbsp;:&nbsp;number&nbsp;of&nbsp;wavelength&nbsp;steps&nbsp;in&nbsp;the&nbsp;cube.<br>
ns&nbsp;&nbsp;&nbsp;:&nbsp;number&nbsp;of&nbsp;stokes&nbsp;parameters.&nbsp;Default&nbsp;=&nbsp;4<br>
trim&nbsp;:&nbsp;Trim&nbsp;off&nbsp;x&nbsp;pixels&nbsp;from&nbsp;each&nbsp;edge.&nbsp;Default&nbsp;=&nbsp;20px<br>
&nbsp;<br>
OUTPUT:<br>
5d&nbsp;cube&nbsp;of&nbsp;shape&nbsp;[nt,ns,nw,nx,ny]<br>
&nbsp;<br>
AUTHOR:&nbsp;Alex<br>
&nbsp;<br>
EXAMPLE:<br>
cube_new&nbsp;=&nbsp;<a href="#-full_cube">full_cube</a>(cube,&nbsp;23)<br>
returns&nbsp;a&nbsp;5D&nbsp;cube&nbsp;in&nbsp;proper&nbsp;format</tt></dd></dl>
 <dl><dt><a name="-full_cube_old"><strong>full_cube_old</strong></a>(cube, nt, nw, ns<font color="#909090">=4</font>, t0<font color="#909090">=0</font>, size<font color="#909090">=860</font>, bin<font color="#909090">=False</font>)</dt><dd><tt>Creates&nbsp;a&nbsp;5D&nbsp;python&nbsp;readable&nbsp;from&nbsp;an&nbsp;lp&nbsp;cube.&nbsp;These&nbsp;files&nbsp;get&nbsp;big,&nbsp;so&nbsp;watch&nbsp;your&nbsp;RAM.<br>
INPUT:<br>
cube&nbsp;:&nbsp;filename,&nbsp;has&nbsp;to&nbsp;be&nbsp;.icube&nbsp;or&nbsp;.fcube<br>
nt&nbsp;&nbsp;&nbsp;:&nbsp;number&nbsp;of&nbsp;timesteps&nbsp;that&nbsp;you&nbsp;want&nbsp;to&nbsp;use<br>
nw&nbsp;&nbsp;&nbsp;:&nbsp;number&nbsp;of&nbsp;wavelength&nbsp;steps&nbsp;in&nbsp;the&nbsp;cube.<br>
ns&nbsp;&nbsp;&nbsp;:&nbsp;number&nbsp;of&nbsp;stokes&nbsp;parameters.&nbsp;Default&nbsp;=&nbsp;4<br>
t0&nbsp;&nbsp;&nbsp;:&nbsp;Start&nbsp;scan.&nbsp;Default=0<br>
size&nbsp;:&nbsp;clip&nbsp;parameter&nbsp;that&nbsp;resizes&nbsp;x,y&nbsp;into&nbsp;a&nbsp;square&nbsp;shape.&nbsp;Default&nbsp;=&nbsp;860<br>
bin&nbsp;&nbsp;:&nbsp;Bin&nbsp;parameter&nbsp;to&nbsp;bin&nbsp;image.&nbsp;Default&nbsp;=&nbsp;False<br>
&nbsp;<br>
OUTPUT:<br>
5d&nbsp;cube&nbsp;of&nbsp;shape&nbsp;[nt,ns,nw,nx,ny]<br>
&nbsp;<br>
AUTHOR:&nbsp;Alex<br>
&nbsp;<br>
EXAMPLE:<br>
cube_new&nbsp;=&nbsp;<a href="#-full_cube">full_cube</a>(cube,&nbsp;3&nbsp;,&nbsp;23,&nbsp;bin=4)<br>
returns&nbsp;a&nbsp;5D&nbsp;cube&nbsp;that&nbsp;contains&nbsp;3&nbsp;scans&nbsp;and&nbsp;is&nbsp;binned&nbsp;down&nbsp;by&nbsp;4.</tt></dd></dl>
 <dl><dt><a name="-get"><strong>get</strong></a>(filename, index, silent<font color="#909090">=True</font>)</dt><dd><tt>Opens&nbsp;crisp&nbsp;files&nbsp;into&nbsp;python<br>
&nbsp;<br>
INPUT:<br>
filename&nbsp;:&nbsp;file&nbsp;to&nbsp;be&nbsp;opened.&nbsp;Has&nbsp;to&nbsp;be&nbsp;.icube&nbsp;or&nbsp;.fcube<br>
index&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;chosen&nbsp;frame,&nbsp;where&nbsp;frame&nbsp;is&nbsp;t*nw*ns&nbsp;+&nbsp;s*nw&nbsp;+&nbsp;w<br>
t=time&nbsp;or&nbsp;scan&nbsp;number<br>
s=stokes&nbsp;parameter<br>
w=wavelength&nbsp;step<br>
nt,&nbsp;ns,&nbsp;nw&nbsp;=&nbsp;number&nbsp;of&nbsp;timesteps,&nbsp;stokes&nbsp;paramneters&nbsp;and&nbsp;wavelength&nbsp;steps&nbsp;respectively.<br>
silent&nbsp;&nbsp;&nbsp;:&nbsp;Does&nbsp;not&nbsp;give&nbsp;prints<br>
OUTPUT:<br>
&nbsp;<br>
Author:&nbsp;G.&nbsp;Vissers&nbsp;(ITA&nbsp;UiO,&nbsp;2016),&nbsp;A.G.M.&nbsp;Pietrow&nbsp;(2018)<br>
&nbsp;<br>
EXAMPLE:<br>
<a href="#-get">get</a>(cube.icube,&nbsp;0)</tt></dd></dl>
 <dl><dt><a name="-header"><strong>header</strong></a>(filename)</dt><dd><tt>Opens&nbsp;header&nbsp;of&nbsp;LP&nbsp;cube<br>
&nbsp;<br>
INPUT:<br>
filename&nbsp;:&nbsp;file&nbsp;to&nbsp;be&nbsp;opened.&nbsp;Has&nbsp;to&nbsp;be&nbsp;.icube&nbsp;or&nbsp;.fcube<br>
&nbsp;<br>
OUTPUT:<br>
datatype,&nbsp;dims,&nbsp;nx,&nbsp;ny,&nbsp;nt,&nbsp;endian,&nbsp;ns<br>
&nbsp;<br>
AUTHOR:&nbsp;G.&nbsp;Vissers&nbsp;(ITA&nbsp;UiO,&nbsp;2016)</tt></dd></dl>
 <dl><dt><a name="-make_header"><strong>make_header</strong></a>(image)</dt><dd><tt>Creates&nbsp;header&nbsp;for&nbsp;La&nbsp;Palma&nbsp;images.</tt></dd></dl>
 <dl><dt><a name="-save_fits"><strong>save_fits</strong></a>(cube_array, name)</dt><dd><tt><a href="#-save_fits">save_fits</a>(cube_array,&nbsp;name)<br>
&nbsp;<br>
Saves&nbsp;an&nbsp;array&nbsp;to&nbsp;fits&nbsp;file.<br>
TODO:&nbsp;add&nbsp;header</tt></dd></dl>
 <dl><dt><a name="-save_lpcube"><strong>save_lpcube</strong></a>(cube_array, name, stokes<font color="#909090">=True</font>, sp<font color="#909090">=False</font>, path<font color="#909090">=''</font>)</dt><dd><tt>Saves&nbsp;cube&nbsp;as&nbsp;lapalma&nbsp;cube&nbsp;and&nbsp;converts&nbsp;to&nbsp;float32<br>
Also&nbsp;rotates&nbsp;them&nbsp;back&nbsp;to&nbsp;the&nbsp;correct&nbsp;position.<br>
&nbsp;<br>
&nbsp;<br>
INPUT:<br>
&nbsp;&nbsp;&nbsp;&nbsp;cube_array&nbsp;&nbsp;:&nbsp;datacube&nbsp;in&nbsp;form&nbsp;of&nbsp;[t,s,w,x,y]<br>
&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;name&nbsp;of&nbsp;file&nbsp;with&nbsp;.icube&nbsp;extention<br>
&nbsp;&nbsp;&nbsp;&nbsp;Stokes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;flag&nbsp;for&nbsp;if&nbsp;data&nbsp;has&nbsp;stokes&nbsp;or&nbsp;not.&nbsp;Default&nbsp;=&nbsp;True<br>
&nbsp;&nbsp;&nbsp;&nbsp;sp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Save&nbsp;spectral&nbsp;cube&nbsp;of&nbsp;shape.&nbsp;Default&nbsp;=&nbsp;False<br>
&nbsp;&nbsp;&nbsp;&nbsp;path&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Filepath&nbsp;where&nbsp;file&nbsp;needs&nbsp;to&nbsp;be&nbsp;saved.&nbsp;Default&nbsp;=&nbsp;''<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Shapes&nbsp;data&nbsp;into&nbsp;[4,&nbsp;nt,&nbsp;nx,&nbsp;ny,&nbsp;nwave]&nbsp;and&nbsp;saves&nbsp;as&nbsp;LP&nbsp;cube&nbsp;using&nbsp;'write_buff'&nbsp;function.<br>
&nbsp;<br>
OUTPUT:<br>
&nbsp;&nbsp;&nbsp;&nbsp;Saved&nbsp;datafile<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
EXAMPLE:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#-save_lpcube">save_lpcube</a>(cube_array,&nbsp;'cube.icube',&nbsp;path='fits/')<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
AUTHOR:&nbsp;Alex</tt></dd></dl>
 <dl><dt><a name="-write_buf"><strong>write_buf</strong></a>(intensity, outfile, wave<font color="#909090">=None</font>, stokes<font color="#909090">=False</font>, sp<font color="#909090">=False</font>, path<font color="#909090">=''</font>)</dt><dd><tt>Writes&nbsp;crispex&nbsp;image&nbsp;and&nbsp;spectral&nbsp;cubes,&nbsp;for&nbsp;when&nbsp;the&nbsp;data&nbsp;is&nbsp;already<br>
resident&nbsp;in&nbsp;memory.&nbsp;To&nbsp;be&nbsp;used&nbsp;when&nbsp;there&nbsp;is&nbsp;ample&nbsp;memory&nbsp;for&nbsp;all<br>
the&nbsp;cubes.<br>
&nbsp;<br>
IN:<br>
intensity:&nbsp;array&nbsp;with&nbsp;intensities&nbsp;(possibly&nbsp;IQUV).&nbsp;Its&nbsp;shape&nbsp;depends<br>
on&nbsp;the&nbsp;value&nbsp;of&nbsp;stokes.&nbsp;If&nbsp;stokes=False,&nbsp;then&nbsp;its&nbsp;shape&nbsp;is<br>
[nt,&nbsp;nx,&nbsp;ny,&nbsp;nwave].&nbsp;If&nbsp;stokes=True,&nbsp;then&nbsp;its&nbsp;shape&nbsp;is<br>
[4,&nbsp;nt,&nbsp;nx,&nbsp;ny,&nbsp;nwave],&nbsp;where&nbsp;the&nbsp;first&nbsp;index&nbsp;corresponds<br>
to&nbsp;I,&nbsp;Q,&nbsp;U,&nbsp;V.<br>
outfile:&nbsp;&nbsp;&nbsp;name&nbsp;of&nbsp;files&nbsp;to&nbsp;be&nbsp;writtenp.&nbsp;Will&nbsp;be&nbsp;prefixed&nbsp;by&nbsp;im_&nbsp;and<br>
sp_.<br>
stokes:&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;True,&nbsp;will&nbsp;write&nbsp;full&nbsp;stokes.<br>
&nbsp;<br>
AUTHOR:&nbsp;OSLO&nbsp;crispex.py</tt></dd></dl>
 <dl><dt><a name="-writeto"><strong>writeto</strong></a>(filename, image, extraheader<font color="#909090">=''</font>, dtype<font color="#909090">=None</font>, verbose<font color="#909090">=False</font>, append<font color="#909090">=False</font>)</dt><dd><tt>Writes&nbsp;image&nbsp;into&nbsp;cube,&nbsp;La&nbsp;Palma&nbsp;format.&nbsp;Analogous&nbsp;to&nbsp;IDL's&nbsp;lp_write.</tt></dd></dl>
</td></tr></table>
</body></html>